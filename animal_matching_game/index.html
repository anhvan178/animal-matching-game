<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Animal Matching Game</title>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f0f8ff;
    text-align: center;
}
h1 {
    color: #333;
}
#game-board {
    display: grid;
    grid-template-columns: repeat(6, 120px);
    grid-gap: 10px;
    justify-content: center;
    margin-top: 20px;
}
.card {
    width: 120px;
    height: 120px;
    perspective: 1000px;
}
.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    cursor: pointer;
}
.card.flipped .card-inner {
    transform: rotateY(180deg);
}
.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
.card-front {
    background-color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
}
.card-back {
    background-color: #87ceeb;
    transform: rotateY(180deg);
    display: flex;
    align-items: center;
    justify-content: center;
}
.card-back img {
    max-width: 80px;
    max-height: 80px;
}
button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
}
</style>
</head>
<body>
<h1>Animal Matching Game</h1>
<div id="game-board"></div>
<button onclick="startGame()">Play Again</button>

<!-- Âm thanh -->
<audio id="click-sound" src="click.mp3"></audio>
<audio id="wrong-sound" src="wrong.mp3"></audio>
<audio id="correct-sound" src="correct.mp3"></audio>
<audio id="win-sound" src="win.mp3"></audio>

<script>
const animals = [
    ["Cat", "cat.png"],
    ["Dog", "dog.png"],
    ["Elephant", "elephant.png"],
    ["Lion", "lion.png"],
    ["Tiger", "tiger.png"],
    ["Monkey", "monkey.png"],
    ["Bird", "bird.png"],
    ["Fish", "fish.png"],
    ["Horse", "horse.png"],
    ["Cow", "cow.png"],
    ["Pig", "pig.png"],
    ["Rabbit", "rabbit.png"]
];

let cards = [];
let flippedCards = [];
let matchedPairs = 0;

function playSound(id) {
    const sound = document.getElementById(id);
    sound.currentTime = 0;
    sound.play();
}

function startGame() {
    const board = document.getElementById('game-board');
    board.innerHTML = '';
    cards = [];
    flippedCards = [];
    matchedPairs = 0;

    animals.forEach(([name, img]) => {
        cards.push({type: 'text', content: name, name});
        cards.push({type: 'image', content: img, name});
    });

    cards.sort(() => 0.5 - Math.random());

    cards.forEach((card, index) => {
        const cardElement = document.createElement('div');
        cardElement.className = 'card';
        cardElement.dataset.name = card.name;
        cardElement.dataset.index = index;

        const inner = document.createElement('div');
        inner.className = 'card-inner';

        const front = document.createElement('div');
        front.className = 'card-front';
        front.textContent = '';

        const back = document.createElement('div');
        back.className = 'card-back';
        if (card.type === 'text') {
            back.textContent = card.content;
        } else {
            const img = document.createElement('img');
            img.src = card.content;
            back.appendChild(img);
        }

        inner.appendChild(front);
        inner.appendChild(back);
        cardElement.appendChild(inner);
        board.appendChild(cardElement);

        cardElement.addEventListener('click', () => flipCard(cardElement));
    });
}

function flipCard(card) {
    if (flippedCards.length === 2 || card.classList.contains('flipped')) return;

    playSound("click-sound"); // âm thanh click khi bấm

    card.classList.add('flipped');
    flippedCards.push(card);

    if (flippedCards.length === 2) {
        const [card1, card2] = flippedCards;
        if (card1.dataset.name === card2.dataset.name) {
            matchedPairs++;
            playSound("correct-sound"); // âm thanh khi đúng
            speak(card1.dataset.name);
            flippedCards = [];
            if (matchedPairs === animals.length) {
                setTimeout(() => {
                    playSound("win-sound"); // âm thanh chúc mừng
                    alert('Congratulations! You matched all pairs!');
                }, 500);
            }
        } else {
            playSound("wrong-sound"); // âm thanh khi sai
            setTimeout(() => {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                flippedCards = [];
            }, 1000);
        }
    }
}

function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    speechSynthesis.speak(utterance);
}

startGame();
</script>
</body>
</html>
